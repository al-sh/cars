<div class="chat-list">
  <!-- 
    Кнопка для создания нового чата.
    (click)="onCreateNewChat()" - при клике вызывается метод onCreateNewChat().
    Пока это заглушка, но структура готова для будущей реализации.
  -->
  <button class="new-chat-button" (click)="onCreateNewChat()">
    + Новый чат
  </button>

  <!--
    Поле поиска чатов с FormControl.

    [formControl]="searchControl" — связывает input с FormControl.
    Это директива из ReactiveFormsModule. Каждое изменение значения
    автоматически попадает в searchControl.valueChanges (Observable).

    В отличие от [(ngModel)] (двусторонний биндинг из FormsModule),
    [formControl] даёт доступ к RxJS операторам для обработки потока:
    debounce, distinct, map и т.д.

    В React аналог: <input value={search} onChange={e => setSearch(e.target.value)} />
    Но в Angular вся обработка (debounce, trim) происходит реактивно через pipe.
  -->
  <div class="search-container">
    <input
      type="text"
      class="search-input"
      placeholder="Поиск чатов..."
      [formControl]="searchControl"
    />
  </div>

  <!--
    Список чатов с фильтрацией.

    На этапе 12 заменили chats() на filteredChats() — computed signal,
    который автоматически фильтрует список при изменении поискового запроса.

    Цепочка реактивности:
    1. Пользователь печатает → searchControl.valueChanges эмитит
    2. debounceTime(300) → ждёт паузы в наборе
    3. toSignal() → обновляет searchQuery signal
    4. computed() → пересчитывает filteredChats
    5. Angular → обновляет DOM (перерисовывает @for)

    @empty — блок, который отображается когда массив пустой.
    Это аналог проверки if (filteredChats.length === 0) в React.
    Angular 17+ добавил @empty как часть @for control flow — удобнее,
    чем писать отдельный @if.
  -->
  <div class="chats-container">
    @for (chat of filteredChats(); track chat.id) {
      <app-chat-item
        [chat]="chat"
        [isActive]="chat.id === currentChatId()"
        [isFavChat]="chat.id === SAVED_CHAT_ID"
        (selected)="onChatSelected($event)"
      />
    } @empty {
      <div class="empty-search">
        Чатов не найдено
      </div>
    }
  </div>
</div>
