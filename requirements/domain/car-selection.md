# Правила подбора автомобиля

Бизнес-логика работы ИИ-ассистента при подборе автомобиля.

---

## Обязательные параметры

Перед выдачей рекомендаций ИИ должен уточнить следующие параметры (если не указаны явно):

| Параметр | Почему важен | Пример уточняющего вопроса |
|----------|--------------|---------------------------|
| **Бюджет** | Определяет сегмент | "Какой бюджет вы рассматриваете?" |
| **Тип кузова** | Функциональность | "Какой тип кузова предпочитаете: седан, кроссовер, хэтчбек?" |
| **Тип двигателя** | Эксплуатационные расходы | "Бензин, дизель, гибрид или электро?" |
| **Количество мест** | Практичность | "Сколько пассажиров планируете возить?" |

## Желательные параметры

Уточняются при необходимости сузить выборку:

- Марка/бренд
- Год выпуска (от/до)
- Пробег (для б/у)
- Тип привода (передний/задний/полный)
- Тип КПП (механика/автомат)
- Мощность двигателя
- Расход топлива
- Конкретные опции (камера, круиз, климат и т.д.)

---

## Логика диалога

### 1. Анализ первого сообщения

```
Если указаны ВСЕ обязательные параметры:
  → Сразу выполнить поиск и показать результаты
  
Если НЕ ВСЕ параметры:
  → Задать уточняющие вопросы (не более 2-3 за раз)
```

### 2. Стратегия уточнений

- Задавать вопросы по одному-два за сообщение
- Предлагать варианты ответа, когда это уместно
- Не повторять уже известную информацию
- При противоречивых требованиях — уточнять приоритеты

### 3. Выдача результатов

- Показывать 3-5 наиболее релевантных вариантов
- Кратко объяснять, почему каждый вариант подходит
- Предлагать уточнить критерии, если вариантов слишком много/мало

---

## Примеры диалогов

### Идеальный промт (сразу в поиск)

**User:** Ищу семейный 7-местный кроссовер, японский бренд, бензин, до 7 млн, автомат, полный привод, не старше 2021 года.

**Assistant:** [выполняет search_cars] Вот подходящие варианты...

### Требуется уточнение

**User:** Нужна надёжная машина для семьи.

**Assistant:** Отличный запрос! Чтобы подобрать оптимальный вариант, уточните:
1. Какой бюджет вы рассматриваете?
2. Сколько человек в семье (нужно ли 7 мест)?

### Противоречивые требования

**User:** Хочу очень динамичную машину, но максимально экономичную.

**Assistant:** Динамика и экономичность — обычно компромисс. Что важнее:
- Разгон до 100 за 6-7 сек, но расход 10-12 л?
- Или расход 6-7 л, но разгон 10-11 сек?

---

## Валидация параметров

### Допустимые диапазоны

| Параметр | Минимум | Максимум |
|----------|---------|----------|
| Цена | 100 000 ₽ | 50 000 000 ₽ |
| Год | 2000 | текущий + 1 |
| Мощность | 50 л.с. | 1000 л.с. |
| Расход | 2 л/100км | 30 л/100км |
| Места | 2 | 9 |

### Нормализация ввода

- "3 млн", "3 миллиона", "3000000" → 3000000
- "кроссовер", "паркетник", "SUV" → suv
- "автомат", "АКПП", "AT" → automatic
- "полный привод", "4WD", "AWD" → awd

---

## Приоритеты при ранжировании

При выдаче результатов учитывать:

1. **Точное соответствие** обязательным параметрам
2. **Близость к бюджету** (не показывать на 30%+ дороже)
3. **Популярность** марки/модели (при прочих равных)
4. **Актуальность** года выпуска (новее — выше)

---

## Ограничения

### Что НЕ делает ассистент

- Не рекомендует конкретных дилеров/продавцов
- Не даёт юридических консультаций
- Не оценивает стоимость конкретного б/у автомобиля
- Не сравнивает с автомобилями вне базы данных
- Не выдумывает характеристики — только данные из БД

### Если нет подходящих вариантов

```
"К сожалению, в базе нет автомобилей с такими параметрами. 
Попробуйте:
- Увеличить бюджет до X
- Рассмотреть альтернативный тип кузова
- Расширить диапазон годов выпуска"
```
